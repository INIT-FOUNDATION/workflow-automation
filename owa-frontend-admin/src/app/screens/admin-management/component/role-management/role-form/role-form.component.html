<app-title
  titleName="Role Details"
  additionalClass="text-lg font-bold"
  [canGoBack]="true"
></app-title>

<div class="">
  <form [formGroup]="roleForm" (ngSubmit)="submit()">
    <div class="p-4 bg-white rounded-md mb-4">
      <div class="flex flex-wrap">
        <div class="w-full sm:w-1/2 p-4 bg-white rounded-md mb-4">
          <div class="mb-4">
            <mat-form-field appearance="outline" class="w-full">
              <mat-label>Role Name</mat-label>
              <input
                matInput
                type="text"
                placeholder="Enter Role Name"
                formControlName="role_name"
              />
            </mat-form-field>
          </div>

          <div class="mb-4">
            <mat-form-field appearance="outline" class="w-full">
              <mat-label>Role Description</mat-label>
              <input
                matInput
                type="text"
                placeholder="Enter Role Description"
                formControlName="role_description"
              />
            </mat-form-field>
          </div>

          <div class="mb-4">
            <mat-form-field appearance="outline" class="w-full">
              <mat-label>Level</mat-label>
              <mat-select formControlName="level">
                <mat-option
                  value="levels"
                  [value]="level.value"
                  *ngFor="let level of levelList"
                  >{{ level.label }}</mat-option
                >
              </mat-select>
            </mat-form-field>
          </div>

          <div class="mb-4">
            <mat-form-field appearance="outline" class="w-full">
              <mat-label>Status</mat-label>
              <mat-select formControlName="status">
                <mat-option
                  *ngFor="let status of statusList"
                  [value]="status.value"
                  >{{ status.label }}</mat-option
                >
              </mat-select>
            </mat-form-field>
          </div>
        </div>

        <div class="w-full sm:w-1/2 p-4 bg-white rounded-md mb-4">
          <div
            class="form-group"
            *ngFor="let control of controls; let i = index"
            [formGroup]="control"
          >
            <div class="mb-2">
              <div
                class="text-lg font-semibold text-white bg-color rounded-t-md p-2 mb-4"
              >
                {{ control.get("menu_name").value }}
              </div>
              <div class="flex">
                <div class="flex items-center space-x-4 me-4 ms-2">
                  <input
                    type="checkbox"
                    class="form-checkbox h-4 w-4"
                    id="{{
                      'access_' + control.get('menu_id').value + '_read'
                    }}"
                    formControlName="read_permission"
                  />
                  <label
                    for="{{
                      'access_' + control.get('menu_id').value + '_read'
                    }}"
                    class="text-base text-gray-700"
                  >
                    Read
                  </label>
                </div>
                <div class="flex items-center space-x-4 me-4 ms-2">
                  <input
                    type="checkbox"
                    class="form-checkbox h-4 w-4"
                    id="{{
                      'access_' + control.get('menu_id').value + '_write'
                    }}"
                    (change)="validate(control)"
                    formControlName="write_permission"
                  />
                  <label
                    for="{{
                      'access_' + control.get('menu_id').value + '_write'
                    }}"
                    class="text-base text-gray-700"
                  >
                    Write
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="flex justify-end">
        <button
          type="submit"
          class="bg-red-600 text-white rounded-lg px-4 py-2 text-sm"
        >
          {{ formType === "add" ? "Create" : "Update" }}
        </button>
      </div>
    </div>
  </form>
</div>
